\begin{figure}[h!tb]%
    \centering
    \captionsetup{type=plot}
    \caption{\label{plot:trans-performance}Parallel Matrix Transposition - Performance graph by size of matrices}
    \begin{tikzpicture}%
        \begin{axis}[
            title={without blocks},
            xlabel={CPUs},
            ylabel={Bandwidth [GB/s]},
            legend pos=north west,
            xtick={1,2,4,8,16,32},
            log ticks with fixed point,
            xmode=log,
            ymode=log,
            cycle multiindex* list={
                color list
                    \nextlist
                marks
                    \nextlist
            },
            width={0.5\linewidth},
        ]%
            \addplot
                coordinates {
                    (1,60.68)
                    (2,119.75)
                    (4,199.63)
                    (8,422.26)
                    (16,735.70)
                    (32,1132.77)
                };
            
            \addplot
                coordinates {
                    (1,57.06)
                    (2,108.90)
                    (4,189.60)
                    (8,373.59)
                    (16,649.21)
                    (32,994.44)
                };
            
            \addplot
                coordinates {
                    (1,56.73)
                    (2,107.44)
                    (4,189.34)
                    (8,370.61)
                    (16,577.36)
                    (32,616.24)
                };
            
            \addplot
                coordinates {
                    (1,54.64)
                    (2,99.98)
                    (4,182.36)
                    (8,306.41)
                    (16,512.49)
                    (32,673.80)
                };

            \legend{20000, 30000, 40000, 50000}
        \end{axis}
    \end{tikzpicture}
    \begin{tikzpicture}%
        \begin{groupplot}[
            group style={
                group size=2 by 2,
                group name=plot,
                xlabels at=edge bottom,
                ylabels at=edge left,
                vertical sep=1.5cm,
                horizontal sep=1.5cm,
            }, 
            width={0.45\linewidth},
            xlabel={CPUs},
            ylabel={Bandwidth [GB/s]},
            xtick={1,2,4,8,16,32},
            legend to name=legend,
            legend columns=-1,
            cycle multiindex* list={
                color list
                    \nextlist
                marks
                    \nextlist
            },
        ]
            \nextgroupplot[
                title={$20000\times20000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]

                \addplot
                    coordinates {
                        (1,171.87)
                        (2,287.56)
                        (4,385.29)
                        (8,1116.72)
                        (16,2421.84)
                        (32,4473.82)
                    };
        
                \addplot
                    coordinates {
                        (1,137.26)
                        (2,255.53)
                        (4,285.90)
                        (8,909.24)
                        (16,2029.22)
                        (32,3886.55)
                    };
                
                \addplot
                    coordinates {
                        (1,117.90)
                        (2,200.28)
                        (4,183.14)
                        (8,773.12)
                        (16,1669.54)
                        (32,2985.25)
                    };
                
                \addplot
                    coordinates {
                        (1,71.18)
                        (2,139.77)
                        (4,194.16)
                        (8,496.08)
                        (16,1102.46)
                        (32,2118.68)
                    };

            \nextgroupplot[
                title={$30000\times30000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]
                \addplot
                    coordinates {
                        (1,184.85)
                        (2,306)
                        (4,676.71)
                        (8,866.91)
                        (16,2086.13)
                        (32,4877.28)
                    };
                
                \addplot
                    coordinates {
                        (1,127.59)
                        (2,249.38)
                        (4,319.56)
                        (8,548.88)
                        (16,903.34)
                        (32,3750.95)
                    };
                
                \addplot
                    coordinates {
                        (1,114.55)
                        (2,211.06)
                        (4,273.97)
                        (8,698.14)
                        (16,1501.79)
                        (32,2287.10)
                    };
                
                \addplot
                    coordinates {
                        (1,68.60)
                        (2,125.83)
                        (4,169.98)
                        (8,402.35)
                        (16,973.03)
                        (32,1976.34)
                    };    

            \nextgroupplot[
                title={$40000\times40000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]
                \addplot
                    coordinates {
                        (1,183.43)
                        (2,301.78)
                        (4,332.15)
                        (8,566.97)
                        (16,1739.83)
                        (32,2963.67)
                    };
                
                \addplot
                    coordinates {
                        (1,130.37)
                        (2,239.85)
                        (4,398.23)
                        (8,740.81)
                        (16,1409.55)
                        (32,2368.82)
                    };
                
                \addplot
                    coordinates {
                        (1,118.86)
                        (2,214.18)
                        (4,235.11)
                        (8,655.69)
                        (16,1576.22)
                        (32,1825.21)
                    };
                
                \addplot
                    coordinates {
                        (1,66.46)
                        (2,129.14)
                        (4,176.71)
                        (8,364.91)
                        (16,936.55)
                        (32,1868.69)
                    };
            
            \nextgroupplot[
                title={$50000\times50000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]
                \addplot
                    coordinates {
                        (1,206.75)
                        (2,325.23)
                        (4,499.49)
                        (8,817.54)
                        (16,1846.62)
                        (32,3775.99)
                    };
                
                \addplot
                    coordinates {
                        (1,123.03)
                        (2,233.76)
                        (4,285.96)
                        (8,567.81)
                        (16,1510.47)
                        (32,2263.04)
                    };
                
                \addplot
                    coordinates {
                        (1,116.25)
                        (2,215.73)
                        (4,325.29)
                        (8,604.07)
                        (16,1229.56)
                        (32,2894.14)
                    };
                
                \addplot
                    coordinates {
                        (1,67.46)
                        (2,128.66)
                        (4,185.12)
                        (8,364.68)
                        (16,891.01)
                        (32,1976.34)
                    };

            \legend{1000, 2000, 5000, 10000}
        \end{groupplot}
        \node (title) at ($(plot c1r1.center)!0.5!(plot c2r1.center)+(0,3cm)$) {with blocks};
    \end{tikzpicture}
    \ref{legend}
\end{figure}