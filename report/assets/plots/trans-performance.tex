\begin{figure}[h!tb]%
    \centering
    \captionsetup{type=plot}
    \caption{\label{plot:trans-performance}Parallel Matrix Transposition - Performance graph by size of matrices}
    \begin{tikzpicture}%
        \begin{axis}[
            title={without blocks},
            xlabel={CPUs},
            ylabel={Bandwidth [GB/s]},
            legend pos=north west,
            xtick={1,2,4,8,16,32},
            log ticks with fixed point,
            xmode=log,
            ymode=log,
            cycle multiindex* list={
                color list
                    \nextlist
                marks
                    \nextlist
            },
            width={0.5\linewidth},
        ]%
            \addplot
                coordinates {
                    (1,0.24)  
                    (2,0.48)  
                    (4,0.80)  
                    (8,1.69)  
                    (16,2.94)  
                    (32,4.53)
                };
            
            \addplot
                coordinates {
                    (1,0.23)
                    (2,0.44)
                    (4,0.76)
                    (8,1.49)
                    (16,2.60)
                    (32,3.98)
                };
            
            \addplot
                coordinates {
                    (1,0.23)
                    (2,0.43)
                    (4,0.76)
                    (8,1.48)
                    (16,2.31)
                    (32,2.46)
                };
            
            \addplot
                coordinates {
                    (1,0.22)
                    (2,0.40)
                    (4,0.73)
                    (8,1.23)
                    (16,2.05)
                    (32,2.70)
                };

            \legend{20000, 30000, 40000, 50000}
        \end{axis}
    \end{tikzpicture}
    \begin{tikzpicture}%
        \begin{groupplot}[
            group style={
                group size=2 by 2,
                group name=plot,
                xlabels at=edge bottom,
                ylabels at=edge left,
                vertical sep=1.5cm,
                horizontal sep=1.5cm,
            }, 
            width={0.45\linewidth},
            xlabel={CPUs},
            ylabel={Bandwidth [GB/s]},
            xtick={1,2,4,8,16,32},
            legend to name=legend,
            legend columns=-1,
            cycle multiindex* list={
                color list
                    \nextlist
                marks
                    \nextlist
            },
        ]
            \nextgroupplot[
                title={$20000\times20000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]

                \addplot
                    coordinates {
                        (1,0.69)
                        (2,1.15)
                        (4,1.54)
                        (8,4.47)
                        (16,9.69)
                        (32,17.90)
                    };
        
                \addplot
                    coordinates {
                        (1,0.55)
                        (2,1.02)
                        (4,1.14)
                        (8,3.64)
                        (16,8.12)
                        (32,15.55)
                    };
                
                \addplot
                    coordinates {
                        (1,0.47)
                        (2,0.80)
                        (4,0.73)
                        (8,3.09)
                        (16,6.68)
                        (32,11.94)
                    };
                
                \addplot
                    coordinates {
                        (1,0.28)
                        (2,0.56)
                        (4,0.78)
                        (8,1.98)
                        (16,4.41)
                        (32,8.47)
                    };

            \nextgroupplot[
                title={$30000\times30000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]
                \addplot
                    coordinates {
                        (1,0.74)
                        (2,1.22)
                        (4,2.71)
                        (8,3.47)
                        (16,8.34)
                        (32,19.51)
                    };
                
                \addplot
                    coordinates {
                        (1,0.51)
                        (2,1.00)
                        (4,1.28)
                        (8,2.20)
                        (16,3.61)
                        (32,15.00)
                    };
                
                \addplot
                    coordinates {
                        (1,0.46)
                        (2,0.84)
                        (4,1.10)
                        (8,2.79)
                        (16,6.01)
                        (32,9.15)
                    };
                
                \addplot
                    coordinates {
                        (1,0.27)
                        (2,0.50)
                        (4,0.68)
                        (8,1.61)
                        (16,3.89)
                        (32,7.91)
                    };    

            \nextgroupplot[
                title={$40000\times40000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]
                \addplot
                    coordinates {
                        (1,0.73)
                        (2,1.21)
                        (4,1.33)
                        (8,2.27)
                        (16,6.96)
                        (32,11.85)
                    };
                
                \addplot
                    coordinates {
                        (1,0.52)
                        (2,0.96)
                        (4,1.59)
                        (8,2.96)
                        (16,5.64)
                        (32,9.48)
                    };
                
                \addplot
                    coordinates {
                        (1,0.48)
                        (2,0.86)
                        (4,0.94)
                        (8,2.62)
                        (16,6.30)
                        (32,7.30)
                    };
                
                \addplot
                    coordinates {
                        (1,0.27)
                        (2,0.52)
                        (4,0.71)
                        (8,1.46)
                        (16,3.75)
                        (32,7.47)
                    };
            
            \nextgroupplot[
                title={$50000\times50000$},
                xmode=log, 
                ymode=log,
                log ticks with fixed point,
            ]
                \addplot
                    coordinates {
                        (1,0.83)
                        (2,1.30)
                        (4,2.00)
                        (8,3.27)
                        (16,7.39)
                        (32,15.10)
                    };
                
                \addplot
                    coordinates {
                        (1,0.49)
                        (2,0.94)
                        (4,1.14)
                        (8,2.27)
                        (16,6.04)
                        (32,9.05)
                    };
                
                \addplot
                    coordinates {
                        (1,0.47)
                        (2,0.86)
                        (4,1.30)
                        (8,2.42)
                        (16,4.92)
                        (32,11.58)
                    };
                
                \addplot
                    coordinates {
                        (1,0.27)
                        (2,0.51)
                        (4,0.74)
                        (8,1.46)
                        (16,3.56)
                        (32,7.77)
                    };

            \legend{1000, 2000, 5000, 10000}
        \end{groupplot}
        \node (title) at ($(plot c1r1.center)!0.5!(plot c2r1.center)+(0,3cm)$) {with blocks};
    \end{tikzpicture}
    \ref{legend}
\end{figure}